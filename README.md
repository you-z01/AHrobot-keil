<!--

 * @Author: z
 * @Date: 2024-11-14
 * @LastEditTime: 2024-11-19 
 * @Description: 项目说明
 * @FilePath: \AHrobot\README.md
-->

## STM32F407ZGT6 编码电机、步进电机、舵机控制实例程序

### 一、项目结构说明

加粗部分为自定义代码文件,没有提到的为MDK V6转换的文件, 本工程编译环境为AC6,若要使用AC5, 参考该方法进行转换：https://blog.csdn.net/z3447643805/article/details/143798477

- Startup: STM32 启动文件
- StdPeriph_Driver: 包含标准外设驱动库文件
- CMSIS: CMSIS 标准的系统初始化文件，初始化系统时钟等基本配置
- FreeRTOS_core：FreeRTOS 的核心源码文件
- FreeRTOS_port: FreeRTOS 的端口适配层
- **Public**: 公共资源文件，包含系统初始化代码、SysTick 定时器的实现、串口 1 通信代码
- **Peripheral_Driver**: 自定义的外围设备驱动，包含电机、舵机相关引脚和 PWM 配置、LED、OLED、蓝牙通信串口接收、IIC 驱动
- **App**: 应用层代码，包含编码电机、步进电机、舵机控制、PID
- **Task**: RTOS 任务代码，蓝牙控制任务
- **User**: 主程序

### 二、引脚说明

#### 1.编码电机

| 电机编号 | STM32引脚编号 | 功能                     |
| -------- | ------------- | ------------------------ |
| **1**    | **PC6**       | **TIM8  PWM输出通道1**   |
|          | PE0           | 驱动板输入控制IN1        |
|          | PE1           | 驱动板输入控制IN2        |
|          | PA15          | 霍尔编码器 A相输入(TIM2) |
|          | PB3           | 霍尔编码器 B相输入(TIM2) |
| **2**    | **PC7**       | **TIM8  PWM输出通道2**   |
|          | PE2           | 驱动板输入控制IN1        |
|          | PE3           | 驱动板输入控制IN2        |
|          | PA6           | 霍尔编码器 A相输入(TIM3) |
|          | PA7           | 霍尔编码器 B相输入(TIM3) |
| **3**    | **PC8**       | **TIM8  PWM输出通道3**   |
|          | PE4           | 驱动板输入控制IN1        |
|          | PE5           | 驱动板输入控制IN2        |
|          | PB6           | 霍尔编码器 A相输入(TIM4) |
|          | PB7           | 霍尔编码器 B相输入(TIM4) |
| **4**    | **PC9**       | **TIM8  PWM输出通道4**   |
|          | PE6           | 驱动板输入控制IN1        |
|          | PE7           | 驱动板输入控制IN2        |
|          | PA0           | 霍尔编码器 A相输入(TIM5) |
|          | PA1           | 霍尔编码器 B相输入(TIM5) |

#### 2.步进电机

| 电机编号 | STM32引脚编号 | 功能                   |
| -------- | ------------- | ---------------------- |
| **1**    | **PE9**       | **TIM1  PWM输出通道1** |
|          | PG2           | 方向控制脚             |
| **2**    | **PE11**      | **TIM1  PWM输出通道2** |
|          | PG3           | 方向控制脚             |
| **3**    | **PE13**      | **TIM1  PWM输出通道3** |
|          | PG4           | 方向控制脚             |
| **4**    | **PE14**      | **TIM1  PWM输出通道4** |
|          | PG5           | 方向控制脚             |

#### 3.舵机

可控制180度舵机和270度舵机

| 电机编号 | STM32引脚编号 | 功能               |
| -------- | ------------- | ----------------- |
| 1        | PA2           | TIM9 PWM输出通道1 |
| 2        | PA3           | TIM9 PWM输出通道2 |
| 3        | PF6           | TIM10 PWM输出通道1|
| 4        | PF7           | TIM11 PWM输出通道1 |
| 5        | PB14          | TIM12 PWM输出通道1 |
| 6        | PB15          | TIM12 PWM输出通道2 |
